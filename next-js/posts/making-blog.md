---
title: 'ブログ作ってみた'
summary: 'はてなブログから自作のブログに移行しました'
date: '2022-05-14'
tags: 
  - Creations
  - Blog
  - React 
  - TypeScript
  - NextJS
  - Design
id: 'making-blog'
---

# ブログ作ってみた

これまで、個人ブログには「はてなブログ」を使用してたけど、特定のサービスに依存したブログ形態への不安や、自由度の小ささといった理由から自作のブログに転換することにした。例えば、

あとは、単純に個人サイトって好きなんですよね。「キリ番踏み逃げ禁止！」みたいな。

ああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ


## 構成

Next.js+TypeScriptで作成し、Vercelにデプロイしてる。Next.js、めちゃくちゃ簡単に作れて感動。ページ遷移も爆速。
## 制作記

### 5/14
TypeScriptとかReactとかを一通り勉強したので制作に入る。とりあえずトップページを作ってみる。ブログのロゴ的なものを作ってたら楽しくて時間が溶けた。

その後はトップページのレイアウトを組んでいたが、CSSをなにも知らないせいでありとあらゆるところで詰まってる。明日ちゃんとCSSの基礎を勉強してから戻ってくる。

### 5/15
午前中を使ってCSSを一通り勉強した。依然としてバグりまくっているけど、「なんでバグってるか」はわかるようになった。成長。
トップページのレイアウトを考えてみる。デザインの仕方わからん……。この機会に勉強してみようかな。

### 5/16
バイトがあったのでとくになにもしていない。本屋で『The Non-Designer's Design Book』を買ってきた。

### 5/17
午前中で『The Non-Designer's Design Book』を読んだ。理論が明解、実例が豊富でめちゃめちゃわかりやすい。これを読んでから、身のまわりのデザインの意図がちょっとだけわかるようになった。次は色彩理論を軽く勉強してみる。コーディングのほうはReactのpropsに関する理解が浅くて沼ってる。

### 5/18
配色についてちょろっと勉強した。
昨日悩んでたところは例のごとく公式ドキュメントにすべて書いてあった。コンポーネントには文字列リテラルは渡せても他のリテラルは渡せないらしい。コンポーネントに渡せるのは文字列リテラルかJSの式。
デザインはひとまず置いておいて、作成したマークダウンを読み込んで動的にページを作ってくれるようにした。
そんなこんなしてたら、どうもこの世には[blog-starter-typescript](https://github.com/vercel/next.js/tree/canary/examples/blog-starter-typescript)というブログ用テンプレートがあったらしいことを知った。知らんがな。
せっかく作ったのでこのまま自作のやつで進める。
なんかMarkdownをHTMLにパースして埋め込むと`<h1>`とか`<li>`とかが反映されなくて謎。パース自体はちゃんとできてるから埋め込むところがバグってる。Chakra UIを有効にしてると通常のHTMLのタグが効かなくなってる。

`<ChakraProvider>`のオプションで`resetCSS={false}`とすることで解決した。
解決したと思ったらコードブロックのハイライトについてなにも考えていなかったことに気がつく。はじめはShikiというライブラリでやろうとしたらなぜかうまくいかないのでhighlight.jsというのにしてみた。


```Javascript
const a = 0;
console.log(a);
```
このとおり、しっかりハイライトしてくれる。

紆余曲折あったが、これでひとまず「Markdownで書いた記事を表示する」という機能が完成した。次はいよいよトップページのデザインかな……。

### 5/19
記事のフォントをいじろうとしたら、なぜかCSSの設定が機能しない。いろいろ調べてたら、Chakra UIの`fontFamily`には配列じゃなくてフォント名を並べた丸ごとの文字列を渡さないといけないらしい。

ブログとして最低限の機能ができたので、Vercelにデプロイしてみたら、404。コンポーネントを雑に分けてたけど、どうもpagesにはちゃんとしたページ（JSXを返す関数をexport defaultしてるコード）しか存在してはいけないらしい。修正したら無事にデプロイできた。

トップページ作るわよ。

記事ページの背景色をいじったらページの最下部（フッターの真上）に謎のスペースがあることに気がついた。`<p>`タグ内のテキストの下の行間のマージンが溢れてしまってるっぽい。`overflow: hidden`で解決。

### 5/20
デザインするぞするぞ。
爽やかでメリハリのついた感じにしたい気持ちがある。
青空が好きなのでそんな感じにしたい。記事の背景の白を基調にして、青がはっきり目立つような感じで。

Qiitaみたいに記事本文の右側に目次をつけて、いま見てる箇所をハイライトして、ワンクリックで遷移できるようにしたい。まあ適当にググればできるやろって言ってたら思いのほか面倒。現在の位置を追尾するためにまたいろいろと調べなければならなかった。いつトップページ作るんですか？

### 5/21
無限に昼寝してたから進捗が少ない。ようやくスクロールに合わせてハイライトされる目次が完成した……。

## あ 
## い 
## う
## え
## お
## か
## き
## く
## け
## こ
## さ 
## し 
## す 
## せ 
## そ